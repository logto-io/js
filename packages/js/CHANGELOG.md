# Change Log

## 5.1.0

### Minor Changes

- 114be86: add one-time token to the sign-in URI parameters type definition.

  Example usage:

  ```typescript
  signIn({
    redirectUri: 'your-sign-in-redirect-uri',
    // ... other params
    oneTimeToken: 'the-generated-one-time-token',
  });
  ```

## 5.0.3

### Patch Changes

- d6a900c: bump dependencies for security update

## 5.0.2

### Patch Changes

- 1fb33d0: force bump for republish

## 5.0.1

### Patch Changes

- 28bc32e: force bump for republish

## 5.0.0

### Major Changes

- 9fa75c6: drop CommonJS support and become pure ESM

## 4.2.1

### Patch Changes

- 7980dec: add additional sign-in parameters support to `buildAngularAuthConfig` util

  Support for configuring additional sign-in parameters to the `buildAngularAuthConfig` util, which enables the following abilities:

  - Login hint
  - Direct sign-in: https://docs.logto.io/docs/references/openid-connect/authentication-parameters/#direct-sign-in
  - First screen: https://docs.logto.io/docs/references/openid-connect/authentication-parameters/#first-screen

## 4.2.0

### Minor Changes

- 5b46f9c: add support for identifier-based and single sign-on first screens and configurable identifiers

  You can now set `identifier:sign_in`, `identifier:register`, `single_sign_on` or `reset_password` as the first screen in the sign-in process. Additionally, you can specify which identifiers (`email`, `phone`, `username`) are allowed for `identifier:sign_in`, `identifier:register` and `reset_password` flows.

  Note the the original `interactionMode` is now deprecated, please use the new `firstScreen` option instead.

  Example (React):

  ```typescript
  signIn({
    redirectUri,
    firstScreen: 'identifier:sign_in',
    identifiers: ['email', 'phone'],
  });
  ```

### Patch Changes

- cb57a5e: fix an incorrect `Nullable` import in js core

## 4.1.5

### Patch Changes

- 5f64e0e: update `UserInfoResponse` type definition by adding `organization_data` claim

## 4.1.4

### Patch Changes

- 6b1eb78: update sign-in options

  - Remove experimental tags from the sign-in options.
  - Update direct sign-in options to include `sso`.

## 4.1.3

### Patch Changes

- 2f8a855: improve `LogtoRequestError`

  - Add `cause` property to `LogtoRequestError` to expose the original response.
  - Make `isLogtoRequestError` more reliable by checking the instance of the error and the `name` property.

## 4.1.2

### Patch Changes

- 7f477b3: allow not including reserved scopes by setting `includeReservedScopes` to `false`
- 7f477b3: deprecate `withDefaultScopes`, use `withReservedScopes`

## 4.1.1

### Patch Changes

- e6c8ec5: remove unsupported direct sign-in methods
- 1975235: fix JSDoc comments

## 4.1.0

### Minor Changes

- e643c01: support `firstScreen`, `directSignIn`, and `extraParams` for sign-in

## 4.0.1

### Patch Changes

- f739621: support login_hint param on sign-in.

## 4.0.0

### Major Changes

- c491de1: remove `verifyIdToken()` util function, now it's in `@logto/client`

  This change removes the dependency of `jose` which keeps the package clean.

### Minor Changes

- c491de1: update prompt usage to allow multiple values

  - Logto config supports both `Prompt` and `Prompt[]` types now.
  - Added `Prompt.None` enum value.

- 2febe71: add `buildAngularAuthConfig()` to build `angular-auth-oidc-client` config in a Logto way

  Also add a new type `LogtoAngularConfig`.

### Patch Changes

- c491de1: use `.toString()` for `URLSearchParams` passing to requester

  Some `fetch` implementation doesn't support `URLSearchParams` directly, so we need to convert it to string before passing it to the requester.

- 26619ed: use TypeScript 5.3.3

## 3.0.2

### Patch Changes

- 867b357: Add Node v20 LTS support

## 3.0.1

### Patch Changes

- ba06cb4: Increase ID token issued-at-time tolerance (iat) to 5 minutes

## 3.0.0

### Major Changes

- 8d693a3: allow arbitrary key access for `IdTokenClaims`

  Achieve it by appending `& Record<string, unknown>` to the type of `IdTokenClaims`. This usually doesn't break things, but it may cause some type errors when iterating over the object values (e.g. `Object.values(claims)`). Mark it as a breaking change just in case.

### Minor Changes

- 8d693a3: sync update from `@logto/core-kit`

  - add TSDoc comments to keys for better developer experience
  - add organizations support in types and `fetchTokenByRefreshToken()`

## 2.1.3

### Patch Changes

- 05b9d3e: update "RefreshTokenTokenResponse" type in core JS SDK and set "refresh_token" field as optional

## 2.1.2

### Patch Changes

- eb94b36: add comment annotations for better dev experience

## 2.1.1

### Patch Changes

- 77480ae: Skip token decode for opaque access token

## 2.1.0

### Minor Changes

- a839b08: Add RBAC support for NextJS SDK

## 2.0.1

### Patch Changes

- 1fb30a1: fix `prepack` script

## 2.0.0

### Major Changes

- 3aa0913: set package type to ESM, keep CJS build for compatibility (#477)

All notable changes to this project will be documented in this file.
See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.

### [1.1.2](https://github.com/logto-io/js/compare/v1.1.1...v1.1.2) (2023-04-24)

**Note:** Version bump only for package @logto/js

## [1.1.0](https://github.com/logto-io/js/compare/v1.0.0...v1.1.0) (2023-03-19)

### Features

- **js:** add interactionMode props to signIn method ([ea763a5](https://github.com/logto-io/js/commit/ea763a59e41251ffad4089df0d6bb876e9901109))

## [1.0.0](https://github.com/logto-io/js/compare/v1.0.0-rc.0...v1.0.0) (2023-02-28)

### Bug Fixes

- remove deperecated role names ([#442](https://github.com/logto-io/js/issues/442)) ([ae44b63](https://github.com/logto-io/js/commit/ae44b634a62c1863bfe433377f21b43de387ac5d))

## [1.0.0-rc.0](https://github.com/logto-io/js/compare/v1.0.0-beta.15...v1.0.0-rc.0) (2023-02-03)

### Bug Fixes

- remove core-kit dependency and update `engines` ([8a24a87](https://github.com/logto-io/js/commit/8a24a870e7b3891f5e205b3e8a9419535baa7b44))

## [1.0.0-beta.14](https://github.com/logto-io/js/compare/v1.0.0-beta.13...v1.0.0-beta.14) (2022-12-12)

**Note:** Version bump only for package @logto/js

## [1.0.0-beta.13](https://github.com/logto-io/js/compare/v1.0.0-beta.12...v1.0.0-beta.13) (2022-11-08)

### Bug Fixes

- use `.mjs` for ESM files ([#429](https://github.com/logto-io/js/issues/429)) ([2993007](https://github.com/logto-io/js/commit/2993007a0dac3c9ed79e2415fcc55059d2d7a494))

## [1.0.0-beta.11](https://github.com/logto-io/js/compare/v1.0.0-beta.10...v1.0.0-beta.11) (2022-10-26)

### Bug Fixes

- **deps:** update dependency @logto/core-kit to v1.0.0-beta.20 ([d9750b1](https://github.com/logto-io/js/commit/d9750b16d79172fb4e9a1166c3f0623452570686))

## [1.0.0-beta.10](https://github.com/logto-io/js/compare/v1.0.0-beta.9...v1.0.0-beta.10) (2022-10-21)

### Bug Fixes

- **deps:** update dependency @logto/core-kit to v1.0.0-beta.19 ([ae0be3b](https://github.com/logto-io/js/commit/ae0be3b6c9bc09f4f291dbb1e2a5be6de3d7afb1))

## [1.0.0-beta.9](https://github.com/logto-io/js/compare/v1.0.0-beta.8...v1.0.0-beta.9) (2022-10-19)

### Bug Fixes

- **deps:** update dependency @logto/core-kit to v1.0.0-beta.16 ([b65a499](https://github.com/logto-io/js/commit/b65a4994dbe43293ac08ba40f07967cf3daaca75))

## [1.0.0-beta.8](https://github.com/logto-io/js/compare/v1.0.0-beta.7...v1.0.0-beta.8) (2022-09-23)

**Note:** Version bump only for package @logto/js

## [1.0.0-beta.7](https://github.com/logto-io/js/compare/v1.0.0-beta.6...v1.0.0-beta.7) (2022-09-20)

**Note:** Version bump only for package @logto/js

## [1.0.0-beta.6](https://github.com/logto-io/js/compare/v1.0.0-beta.5...v1.0.0-beta.6) (2022-09-17)

### Bug Fixes

- bump to essentials v1.2.1 to use utf-8 on decoding base64 ([5a4ad09](https://github.com/logto-io/js/commit/5a4ad093e14ffa4927a09f4f692c0c26f412b7c0))

## [1.0.0-beta.5](https://github.com/logto-io/js/compare/v1.0.0-beta.4...v1.0.0-beta.5) (2022-09-13)

### Features

- **js,client:** enable user endpoint in js core and client sdks ([abd2842](https://github.com/logto-io/js/commit/abd28427f36594d9fa90a9c4aa27b526d9150d5a))

## [1.0.0-beta.4](https://github.com/logto-io/js/compare/v1.0.0-beta.3...v1.0.0-beta.4) (2022-09-09)

**Note:** Version bump only for package @logto/js

## [1.0.0-beta.2](https://github.com/logto-io/js/compare/v1.0.0-beta.1...v1.0.0-beta.2) (2022-08-08)

**Note:** Version bump only for package @logto/js

## [1.0.0-beta.0](https://github.com/logto-io/js/compare/v1.0.0-alpha.3...v1.0.0-beta.0) (2022-07-21)

**Note:** Version bump only for package @logto/js

## [1.0.0-alpha.2](https://github.com/logto-io/js/compare/v1.0.0-alpha.1...v1.0.0-alpha.2) (2022-07-08)

### Features

- **js:** optimize error message for unavailable crypto.subtle in insecure contexts ([#324](https://github.com/logto-io/js/issues/324)) ([38aedf7](https://github.com/logto-io/js/commit/38aedf7256cbc3b9d3d9056211025f59526edeff))

## [1.0.0-alpha.1](https://github.com/logto-io/js/compare/v1.0.0-alpha.0...v1.0.0-alpha.1) (2022-07-07)

**Note:** Version bump only for package @logto/js

## [1.0.0-alpha.0](https://github.com/logto-io/js/compare/v0.2.2...v1.0.0-alpha.0) (2022-07-07)

### Bug Fixes

- packing ([#321](https://github.com/logto-io/js/issues/321)) ([c808005](https://github.com/logto-io/js/commit/c8080058fa1861c02f264a0d8db568c0292d3d7f))

## [0.2.0](https://github.com/logto-io/js/compare/v0.1.18...v0.2.0) (2022-06-30)

### Features

- **js,browser:** configurable prompt ([#311](https://github.com/logto-io/js/issues/311)) ([2b9ae04](https://github.com/logto-io/js/commit/2b9ae0460f35e636aee448c46f810c74b6e5b230))
- remove userinfo ([#317](https://github.com/logto-io/js/issues/317)) ([3f9d412](https://github.com/logto-io/js/commit/3f9d412cb2ec930fe036c8ad9c7d1568498581e8))

### [0.1.18](https://github.com/logto-io/js/compare/v0.1.17...v0.1.18) (2022-06-29)

### Bug Fixes

- **js:** support null in id token ([#314](https://github.com/logto-io/js/issues/314)) ([abb53e2](https://github.com/logto-io/js/commit/abb53e296ed50afb339a7f4864e7f368cacb0e1e))

### [0.1.17](https://github.com/logto-io/js/compare/v0.1.16...v0.1.17) (2022-06-29)

### Bug Fixes

- **deps:** update dependency superstruct to ^0.16.0 ([#302](https://github.com/logto-io/js/issues/302)) ([d23c3d3](https://github.com/logto-io/js/commit/d23c3d393a55e508c2173d0ce0a14320e33f2873))

### [0.1.16](https://github.com/logto-io/js/compare/v0.1.15...v0.1.16) (2022-06-14)

**Note:** Version bump only for package @logto/js

### [0.1.14](https://github.com/logto-io/js/compare/v0.1.13...v0.1.14) (2022-06-02)

**Note:** Version bump only for package @logto/js

### [0.1.11](https://github.com/logto-io/js/compare/v0.1.10...v0.1.11) (2022-05-28)

**Note:** Version bump only for package @logto/js

### [0.1.10](https://github.com/logto-io/js/compare/v0.1.9...v0.1.10) (2022-05-28)

### Bug Fixes

- **js:** oidc error description should be optional string ([0867e34](https://github.com/logto-io/js/commit/0867e34cb570c603f2611f0d26156210eebd0de1))

### [0.1.7](https://github.com/logto-io/js/compare/v0.1.6...v0.1.7) (2022-05-17)

**Note:** Version bump only for package @logto/js

### [0.1.5](https://github.com/logto-io/js/compare/v0.1.4...v0.1.5) (2022-05-05)

### Bug Fixes

- leverage root `prepack` lifecycle for publish ([#235](https://github.com/logto-io/js/issues/235)) ([8e66d82](https://github.com/logto-io/js/commit/8e66d82dacd204c32ffc39f4440b47e0f7541cc3))

### [0.1.3](https://github.com/logto-io/js/compare/v0.1.2...v0.1.3) (2022-03-16)

**Note:** Version bump only for package @logto/js

### [0.1.2](https://github.com/logto-io/js/compare/v0.1.2-rc.1...v0.1.2) (2022-03-10)

**Note:** Version bump only for package @logto/js

### [0.1.2-rc.1](https://github.com/logto-io/js/compare/v0.1.2-rc.0...v0.1.2-rc.1) (2022-03-10)

**Note:** Version bump only for package @logto/js

### [0.1.2-rc.0](https://github.com/logto-io/js/compare/v0.1.1-rc.0...v0.1.2-rc.0) (2022-03-10)

### Bug Fixes

- remove `prepublish` script ([#221](https://github.com/logto-io/js/issues/221)) ([cc89533](https://github.com/logto-io/js/commit/cc895337762cf7740578a8eb14835ed0d5d72905))

### [0.1.1-rc.0](https://github.com/logto-io/js/compare/v0.1.0...v0.1.1-rc.0) (2022-03-10)

### Bug Fixes

- add `publishConfig` to packages ([a809e25](https://github.com/logto-io/js/commit/a809e257982f7d3c31f104fa5daf983c535adfc5))

## 0.1.0 (2022-03-10)

### ⚠ BREAKING CHANGES

- **js:** initialize js/js package (#122)

### Features

- **browser-sample:** init package ([10076e1](https://github.com/logto-io/js/commit/10076e15e6c491c2584cb8a0269f0d7bfddef526))
- **browser:** signIn ([#170](https://github.com/logto-io/js/issues/170)) ([2418193](https://github.com/logto-io/js/commit/24181931643472318345678ec68b7e874a72fd5a))
- **js:** add CodeTokenResponse ([#186](https://github.com/logto-io/js/issues/186)) ([ece931c](https://github.com/logto-io/js/commit/ece931c3556a3fb654127ef258e25c141e27fa7a))
- **js:** core function generateSignOutUri ([0a26ebe](https://github.com/logto-io/js/commit/0a26ebea93d08e559fb81ef930aa0e604b90b24f))
- **js:** decodeIdToken ([#128](https://github.com/logto-io/js/issues/128)) ([973708b](https://github.com/logto-io/js/commit/973708b7f3f518b85591384a6d1392b74ef71ab1))
- **js:** export in index.ts ([#159](https://github.com/logto-io/js/issues/159)) ([423c185](https://github.com/logto-io/js/commit/423c1851e6339a5069559abc564e229aa111529a))
- **js:** fetch access token by authorization code ([1160683](https://github.com/logto-io/js/commit/1160683f2eabde8f988c01cddd829fc480b54b20))
- **js:** fetchOidcConfig ([#138](https://github.com/logto-io/js/issues/138)) ([8555d16](https://github.com/logto-io/js/commit/8555d169e82d7b814b017583ad2f924b3a6ac45d))
- **js:** fetchUserInfo ([#152](https://github.com/logto-io/js/issues/152)) ([e0dca51](https://github.com/logto-io/js/commit/e0dca5153354966470c00d8c23a8066e26fb27e2))
- **js:** generate state, code verifier and code challenge ([#125](https://github.com/logto-io/js/issues/125)) ([9784f3a](https://github.com/logto-io/js/commit/9784f3a97f4d84d9945cd46b8a6a9b93b33b8964))
- **js:** implement fetchTokenByRefreshToken ([4e6600e](https://github.com/logto-io/js/commit/4e6600e6035fb2b849d224c171ca1bc29b34cb3e))
- **js:** refactor fetchTokenByRefreshToken ([#147](https://github.com/logto-io/js/issues/147)) ([f8dbcce](https://github.com/logto-io/js/commit/f8dbcce16ce9af14936807d7eb59e0d7bbde8edd))
- **js:** requester ([#137](https://github.com/logto-io/js/issues/137)) ([c86745b](https://github.com/logto-io/js/commit/c86745bab035543b3d14dc5fe1433e413d3d51f2))
- **js:** revoke ([#153](https://github.com/logto-io/js/issues/153)) ([2e554ca](https://github.com/logto-io/js/commit/2e554ca79b9ec1b140da2a81704d0e65d5a751eb))
- **js:** scopes and generateSignInUri ([#150](https://github.com/logto-io/js/issues/150)) ([c47e3ea](https://github.com/logto-io/js/commit/c47e3ea4a94c35e63e0d77bcc27438c380c657ca))
- **js:** verifyAndParseCodeFromCallbackUri ([#132](https://github.com/logto-io/js/issues/132)) ([7180b03](https://github.com/logto-io/js/commit/7180b031c53161dd3ff77115e1e0e5d3fa73b224))
- **js:** verifyIdToken ([#127](https://github.com/logto-io/js/issues/127)) ([954dc6d](https://github.com/logto-io/js/commit/954dc6d9f046e752f635248bcd87e15cf02fb63e))

### Bug Fixes

- `package.json` ([8afd534](https://github.com/logto-io/js/commit/8afd534e5d79db29c9ef1aa55cfa94549ea025b8))
- **js:** grant type should be 'authorization_code' instead of 'code' ([5d416d0](https://github.com/logto-io/js/commit/5d416d0bb0901dc7fd7b79afdb504a1cdf11b901))
- **js:** response_type should be hard-coded as 'code' ([5048ae1](https://github.com/logto-io/js/commit/5048ae152f15a9fd5c2626c5e6c54d8fd327aadb))
- **js:** update node-fetch version ([8f012dd](https://github.com/logto-io/js/commit/8f012dd962e234d59a5d2e4f7397e863ee97f02d))
- **ut:** update jest coverage configs ([b10d84e](https://github.com/logto-io/js/commit/b10d84edbf6c1639bfaa4dbb9fa41f4a10543bde))

### Code Refactoring

- **js:** initialize js/js package ([#122](https://github.com/logto-io/js/issues/122)) ([07322cb](https://github.com/logto-io/js/commit/07322cb02dd461cc69dc1f7bf815c649e91046da))
